(this.webpackJsonpCourier=this.webpackJsonpCourier||[]).push([[0],{1001:function(e,t){},1016:function(e,t){},102:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return o}));var a=function(e){var t=e.length;return 0===t||1===t?e[0]:2===t?"".concat(e[0]," & ").concat(e[1],"}"):[e.slice(0,t-1).join(", "),e.slice(-1)[0]].join(", & ")},r=function(e){return(e||"").split("-").map((function(e){return(e[0]&&e[0].toUpperCase()||"")+e.slice(1)})).join("-")},c=function(e){return e*Math.PI/180},l=function(e,t){var n={1:{lat:c(e.lat),lng:c(e.lng)},2:{lat:c(t.lat),lng:c(t.lng)}},a=n[2].lat-n[1].lat,r=n[2].lng-n[1].lng,l=Math.pow(Math.sin(a/2),2)+Math.cos(n[1].lat)*Math.cos(n[2].lat)*Math.pow(Math.sin(r/2),2);return 6371e3*(2*Math.asin(Math.sqrt(l)))},o=function(e,t){for(var n="string"===typeof e,a=Array.from(e),r=[];a.length;){var c=a.splice(0,t);r.push(n?c.join(""):c)}return r}},1082:function(e,t){},1084:function(e,t){},1120:function(e,t){},1122:function(e,t){},1128:function(e,t){},1214:function(e,t){},1392:function(e,t){},1446:function(e,t){},1455:function(e,t){},1457:function(e,t){},1579:function(e,t){},1631:function(e,t){},1652:function(e,t){},1654:function(e,t){},1685:function(e,t){},1907:function(e,t){},1969:function(e,t){},1986:function(e,t){},1988:function(e,t){},2038:function(e,t){},2189:function(e,t){},2343:function(e,t){},2347:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(155),l=n.n(c),o=(n(961),n(3)),i=n.n(o),u=n(28),s=n(26),m=n(105),f=n(79),d=n(926),p=n.n(d),h=n(188),b=n(111),E=n(2364),g=n(51),v=n.n(g),x=(n(419),n(42)),j=n(145),w=n(174),O=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.b,{maxWidth:"45em",mx:"auto",marginTop:"1.5em",px:[3,3,4]},r.a.createElement(h.a,null,r.a.createElement(b.a,{flexDirection:"column"},r.a.createElement("h1",null,"The ",r.a.createElement("acronym",{title:"Department of Happiness"},"DoH"),"'s Ad Hoc Courier Service"),r.a.createElement(m.Link,{to:"/overview",style:{alignSelf:"center"}},r.a.createElement(j.a,{mainColor:"DarkCyan"},"Overview"))))),r.a.createElement(x.b,null,r.a.createElement(h.a,{maxWidth:"25em",mx:"auto",marginTop:"1.5em",px:[3,3,4]},r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,"Anyone"),r.a.createElement(m.Link,{to:"/ppl"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Manage Contacts")),r.a.createElement(m.Link,{to:"/labels"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Print Labels")))),r.a.createElement(h.a,{maxWidth:"25em",mx:"auto",marginTop:"1.5em"},r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,"Couriers"),r.a.createElement(m.Link,{to:"/jobs/public"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Find Public Jobs")),r.a.createElement(m.Link,{to:"/jobs/private"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Check Private Jobs")),r.a.createElement(m.Link,{to:"/parcels"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Investigate Parcels")),r.a.createElement(m.Link,{to:"/drive"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Drive")))),r.a.createElement(h.a,{maxWidth:"25em",mx:"auto",marginTop:"1.5em",px:[3,3,4]},r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,"Shippers"),r.a.createElement(m.Link,{to:"/contracts/new"},r.a.createElement(j.a,{mx:"auto",my:"0.5em"},"Ship a Parcel"))))))},k=n(43),y=n(84),C=n(2357),S=n(2358),D=n(2361),P=n(2351),I=n(2359),M=n(2362),A=n(951),T=n(953),L=n(2366),B=n(2360),N=n(954),G=n(2363),F=n(219),R=n(65),W=n.n(R),z=(n(2082),n(102)),H="0xC33290860C1DA6a84195C5cf1575860d3A3ED73d",q=function(){var e=Object(a.useState)({lat:-.09,lng:51.505}),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),o=Object(s.a)(l,2),m=o[0],f=o[1],d=Object(a.useState)([]),p=Object(s.a)(d,2),E=p[0],g=p[1],x=Object(a.useState)(),O=Object(s.a)(x,2),R=O[0],q=O[1],U=Object(a.useState)({}),Y=Object(s.a)(U,2),_=Y[0],J=Y[1],Q=Object(a.useState)(),V=Object(s.a)(Q,2),Z=V[0],K=V[1],$=new v.a(v.a.givenProvider);Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){return c({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(e){return alert("Error Getting Current Position: '".concat(e.message,"'"))}))}),[]);var X=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,e),t&&r.a.createElement(T.a,{size:"80px"}))},e.prev=1,q(t("Loading Profile\u2026",!0)),e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return n=e.sent[0],q(t(r.a.createElement(L.a,{message:n,placement:"bottom"},r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,"Researching"),r.a.createElement(B.a,{opts:{seed:n,size:50}}))),!0)),e.next=9,W.a.openBox(n,v.a.givenProvider);case 9:return a=e.sent,q(t("Opened Box\u2026",!0)),e.next=13,a.syncDone;case 13:return q(t("Getting Name\u2026",!0)),e.next=16,Promise.all([Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.t1=t,e.t2="Welcome ",e.next=5,a.public.get("name");case 5:return e.t3=e.sent,e.t4=e.t2.concat.call(e.t2,e.t3),e.t5=(0,e.t1)(e.t4),e.abrupt("return",(0,e.t0)(e.t5));case 9:case"end":return e.stop()}}),e)})))(),Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.getSpace(H,"courier-zones");case 2:if(t=e.sent,0!==Object.keys(t).length){e.next=11;break}if(n.toLowerCase()!==H.toLowerCase()){e.next=10;break}return e.next=7,a.openSpace("courier-zones");case 7:t=e.sent,e.next=11;break;case 10:alert("Couldn't find the thread manager.");case 11:K(t);case 12:case"end":return e.stop()}}),e)})))()]);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),alert("Error Connecting to 3Box: '".concat(e.t0.message,"'")),q(t("Loading Failed"));case 22:case"end":return e.stop()}}),e,null,[[1,18]])}))),[]);Object(a.useEffect)((function(){X()}),[X]);var ee=Object(a.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=25;break}n=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="contract"===t.type,!e.t0){e.next=7;break}return e.next=4,$.eth.getBlockNumber();case 4:e.t1=e.sent,e.t2=t.expires,e.t0=e.t1<=e.t2;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a={},r=Object(y.a)(t),e.prev=4,r.s();case 6:if((c=r.n()).done){e.next=16;break}if((l=c.value).addr){e.next=12;break}return e.next=11,Z.public.get("zone-db-".concat(l.id));case 11:l.addr=e.sent;case 12:if(!l.addr){e.next=14;break}return e.delegateYield(i.a.mark((function e(){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.joinThreadByAddress(l.addr);case 2:return t=e.sent,e.next=5,t.getPosts();case 5:return r=e.sent,e.next=8,Promise.all(r.map(n));case 8:c=e.sent,a[l.id]=r.filter((function(e,t){return c[t]}));case 10:case"end":return e.stop()}}),e)}))(),"t0",14);case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(4),r.e(e.t1);case 21:return e.prev=21,r.f(),e.finish(21);case 24:J(a);case 25:case"end":return e.stop()}}),e,null,[[4,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[Z]);Object(a.useEffect)((function(){ee(E)}),[ee,E]),Object(a.useEffect)((function(){var e=.015,t=2*Math.PI/6,a=Math.floor(n.lng/.03),r=Math.floor(n.lat/(.03*Math.sin(t))),c=.03*Math.sin(t),l=.03,o=35*c,i=12*l,u=Object(k.a)(new Array(420)).map((function(u,s){var m=Math.floor(s/12),f={x:n.lng+1*m*e*Math.sin(t)-(o/4-c/2),y:n.lat+s%12*3*e-(3*i/4+l/2)};m%2===1&&(f.y+=3*e*Math.cos(t));var d=[[f.y-e,f.x],[f.y-e*Math.cos(t),f.x+e*Math.sin(t)],[f.y+e*Math.cos(t),f.x+e*Math.sin(t)],[f.y+e,f.x],[f.y+e*Math.cos(t),f.x-e*Math.sin(t)],[f.y-e*Math.cos(t),f.x-e*Math.sin(t)]];return d.center={lat:f.y,lng:f.x},d.index={row:a+m,col:r+s%35},d.id="(".concat(d.index.row,",").concat(d.index.col,")"),d.contracts=[],d}));f(u);var s=u.filter((function(e){return e.every((function(e){return Math.sqrt(Math.pow(e[1]-n.lng,2)+Math.pow(e[0]-n.lat,2))<=.15}))}));g(s)}),[n]);var te=console.info,ne=console.info;return r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},R&&r.a.createElement(h.a,null,r.a.createElement(w.a,null,R)),r.a.createElement(w.a,null,"#1. Select Your Availability Zone"),r.a.createElement(C.a,{center:n,zoom:11},r.a.createElement(S.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(D.a,null,r.a.createElement(A.a,{position:"topleft",onDrawStart:function(e){console.info("DSTRT",e)},onDrawStop:function(e){console.info("DSTP",e)},onCreated:te,onDeleted:ne,draw:{polyline:!1,polygon:!1,marker:!1,rectangle:!1,circlemarker:!1,circle:{shapeOptions:{color:"#FF0000AA"}}}})),r.a.createElement(P.a,{position:n},r.a.createElement(I.a,null,"You are here.")),m.map((function(e,t){return r.a.createElement(M.a,{key:t,color:E.includes(e)?e.addr?"#048A0999":"#FF7B0099":"#AF05F722",positions:e,onClick:function(){g((function(t){return!t.includes(e)?[e].concat(Object(k.a)(t)):t.filter((function(t){return t!==e}))}))}})}))),r.a.createElement(N.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Zone ID"),r.a.createElement("th",null,"# of Open Contracts"),r.a.createElement("th",null,"\ud83d\udd4a to Center"))),r.a.createElement("tbody",null,E.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.contracts.length),r.a.createElement("td",null,(Object(z.d)(n,e.center)/1e3).toFixed(2),"km"))})))),r.a.createElement(N.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\ud83d\udd4a to Pickup Waypoint"),r.a.createElement("th",null,"Waypoint to Sender"),r.a.createElement("th",null,"\ud83d\udd4a Pickup to Dropoff Waypoint"),r.a.createElement("th",null,"Waypoint to Recipient"),r.a.createElement("th",null,"Bid"))),r.a.createElement("tbody",null,E.map((function(e){return(_[e.id]||[]).map((function(t){return r.a.createElement("tr",{id:e.id,key:e.id},r.a.createElement("td",null,t.pickup.waypoint),r.a.createElement("td",null,t.pickup.travelTime),r.a.createElement("td",null,t.dropoff.waypoint+t.pickup.waypoint),r.a.createElement("td",null,t.dropoff.travelTime),r.a.createElement("td",null,r.a.createElement(G.a,{onSubmit:alert},r.a.createElement(F.a,{type:"number",name:"bid"}),r.a.createElement(j.a,null,"Bid"))))}))})))))},U=(n(513),n(2123),n(107)),Y=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,c,l,o,u,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.space,r=n.onUpdate,e.next=3,a.joinThreadByAddress(t);case 3:return c=e.sent,r&&c.onUpdate(console.log),e.next=7,c.getPosts();case 7:l=e.sent,o={},u=Object(y.a)(l);try{for(u.s();!(s=u.n()).done;)m=s.value,o[m.author]=Object(U.a)({id:m.postId},m.message)}catch(i){u.e(i)}finally{u.f()}return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(a.useState)({text:"Initializing\u2026",color:"blue"}),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),o=Object(s.a)(l,2),m=o[0],f=o[1],d=function(e,t){return c({text:e,color:t})},p=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n,a,r,c,l,o,u,s,m,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=v.a.givenProvider)||(t=window.web3&&window.web3.currentProvider),t){e.next=5;break}throw new Error("Couldn't Find an Ethereum Provider.\n\nCan't connect to databases.");case 5:return n=new v.a(t),console.info("ACCT",n.eth.accounts.create()),d("Getting Address\u2026","pink"),e.next=10,n.eth.getAccounts();case 10:return a=e.sent[0],d("Opening 3Box: ".concat(a,"\u2026"),"orange"),e.next=14,W.a.openBox(a,t);case 14:return r=e.sent,d("Got 3Box\u2026","green"),e.next=18,r.openSpace("courier");case 18:return c=e.sent,d("Got Courier Space\u2026","blue"),e.next=22,c.joinThread("inbox");case 22:return l=e.sent,d("Got Inbox Thread\u2026","red"),20,e.next=27,l.getPosts({limit:20});case 27:o=e.sent,d("Got ".concat(o.length," Entr").concat(1===o.length?"y":"ies","\u2026"),"blue"),u=Object(y.a)(o),e.prev=30,u.s();case 32:if((s=u.n()).done){e.next=41;break}if(m=s.value,p=m.message,h=m.author,m.timestamp,m.postId,!p.awaiting){e.next=38;break}return e.delegateYield(i.a.mark((function e(){var n,a,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.getConfig(h);case 2:return n=e.sent,d("Getting 3Box\u2026","green"),e.next=6,W.a.openBox(n.links[0].address,t);case 6:return a=e.sent,d("Got 3Box.","green"),e.next=10,a.openSpace("courier");case 10:return r=e.sent,d("Got Parcels Space\u2026","blue"),e.next=14,Y(p.awaiting,{space:r,onUpdate:function(){console.info("UPDT")}});case 14:return c=e.sent,l=Object.keys(c).length,d("Got ".concat(l," Author").concat(1===l?"":"s","\u2026"),"blue"),f((function(e){return[c].concat(Object(k.a)(e))})),e.t0=console,e.next=21,a._3id.signJWT({payload:"test"},{space:"courier"});case 21:e.t1=e.sent,e.t0.info.call(e.t0,e.t1);case 23:case"end":return e.stop()}}),e)}))(),"t0",36);case 36:e.next=39;break;case 38:p.contract?console.info("CTCT",p):console.error("Unknown Inbox Post Type",p);case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(30),u.e(e.t1);case 46:return e.prev=46,u.f(),e.finish(46);case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(0),console.error(e.t2),alert(e.t2.message);case 55:d("Done");case 56:case"end":return e.stop()}}),e,null,[[0,51],[30,43,46,49]])}))),[]);return Object(a.useEffect)((function(){p()}),[p]),r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,"Private Jobs"),n&&r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,n.text),n.color&&r.a.createElement(T.a,{color:n.color})),m.map((function(e,t){return r.a.createElement(h.a,{key:t},JSON.stringify(e))})))},J=n(942),Q=n(186),V=n(387),Z=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(f.k)();return r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},n?r.a.createElement(V.a,{onScan:function(e){if(e){u(e);var t=e.match(/^https?:\/\/(pkg|sw).dhappy.org(\/cel\/([^/]*)(\/(.+))?$)/);console.info(e,t),t&&(c(!1),u(t[3]),"pkg"===t[1]?m.push(t[2]):window.location=t[0])}}}):r.a.createElement(J.a,{label:"Package ID"},r.a.createElement(b.a,{alignItems:"center",flexDirection:"row"},r.a.createElement(F.a,{type:"text",required:!0,width:"20em",placeholder:"128 bits base58 encoded",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement(L.a,{message:"Read QR Code"},r.a.createElement(j.a,{onClick:function(){return c(!0)}},r.a.createElement(Q.a,{name:"Pages"}))))))},K=n(101),$=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)([]),m=Object(s.a)(o,2),f=m[0],d=m[1],p=function(e){return d((function(t){return[].concat(Object(k.a)(t),[e])}))},h=Object(a.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return n=e.sent[0],p("Got Address: ".concat(n)),e.next=7,W.a.openBox(n,v.a.givenProvider);case 7:return a=e.sent,p("Awaiting 3Box\u2026"),e.next=11,a.waitSync;case 11:return p("Got 3Box\u2026"),e.next=14,a.openSpace("courier-parcels");case 14:return r=e.sent,p("Got Courier Space\u2026"),e.next=18,r.joinThread("thread-".concat(t));case 18:return c=e.sent,p("Got ".concat(t," Thread\u2026")),10,e.next=23,c.getPosts({limit:10});case 23:o=e.sent,p("Got ".concat(o.length," Entr").concat(1===o.length?"y":"ies","\u2026")),l(!1);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.useEffect)((function(){h(e.match.params.guid)}),[]),r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(w.a,null,"Package Viewer"),r.a.createElement(w.a,null,e.match.params.guid),c&&r.a.createElement(T.a,null),r.a.createElement("ul",null,f.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))},X=function(){return r.a.createElement("h1",null,"Contracts")},ee=n(945),te=function(){return r.a.createElement("h1",null,"Join")},ne=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(a.useState)("1em"),f=Object(s.a)(m,2),d=f[0],p=f[1],h=Object(a.useRef)(null),b={Grower:r.a.createElement("p",null,"Produces the raw materials for production of the substance."),Supplier:r.a.createElement("p",null,"Processes the raw materials into a consumable form."),Supply:r.a.createElement("p",null,"The final product is a large quantity of the consumable."),Unboxing:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The plug receives a part of the supply and measures the amount received."),r.a.createElement("p",null,r.a.createElement("i",null,"This is recorded for potential disputes with the supplier."))),Testing:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The plug performs available tests on the supply."),r.a.createElement("p",null,r.a.createElement("i",null,"This is recorded for the customer and supplier."))),Packaging:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The plug divides the supply into smaller units."),r.a.createElement("p",null,r.a.createElement("i",null,"Each packaging is recorded for inclusion in the inventory."))),Bundling:r.a.createElement("p",null,"Packages are labeled with GUIDs and gathered in a locked bundle."),Drop:r.a.createElement("p",null,"A courier picks up the bundle."),Rideshare:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Customers select their pick-up and destination areas.")),Shopping:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"On an in-car tablet, they communicate with a plug as to inventory."),r.a.createElement("p",null,r.a.createElement("i",null,"The shop includes the testing and packaging recordings for each parcel."))),Payment:r.a.createElement("p",null,"Payment for a parcel is transmitted via IOTA."),Fulfillment:r.a.createElement("p",null,"The courier gives the customer their purchase.")};Object(a.useEffect)((function(){h.current.addEventListener("load",(function(){var e=h.current.contentDocument.querySelector("svg");e||alert("Couldn't find SVG.");var t=e.querySelectorAll("[*|label='Icons'] > *");console.info(t),t&&0!==t.length||alert("Couldn't find nodes.");var n,a=Object(y.a)(t);try{var r=function(){var e=n.value,t=e.getAttributeNS("http://www.inkscape.org/namespaces/inkscape","label"),a=void 0,r=0;for(var l in b){if(a=b[l],l===t)break;r++}r===Object.keys(b).length&&(a=void 0);var o="20em",i=Math.floor(r/3);switch(i){case 0:o="30%";break;case 1:o="15%";break;case 2:o="25em";break;case 3:o="65%";break;default:o="".concat(25*i,"em")}e.addEventListener("mouseover",(function(){a?(u(t),c(a),p(o)):alert("Couldn't Find: ".concat(t))}),!0),e.addEventListener("mouseout",(function(){u(void 0),c(void 0)}),!0)};for(a.s();!(n=a.n()).done;)r()}catch(l){a.e(l)}finally{a.f()}}),!0)}),[]);return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{onClick:function(){c(void 0)},style:{textAlign:"center",padding:"1em",left:0,right:0,position:"absolute",margin:"auto",maxWidth:"45em",top:d,backgroundColor:"yellow",border:"2px solid black",borderRadius:"1.5em"}},r.a.createElement("h1",null,i),n),r.a.createElement("object",{id:"chain",data:"chain.svg",ref:h,style:{display:"block",maxWidth:"45em",margin:"auto"}}))},ae=n(67),re=n(2367),ce=n(2365),le=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)(""),l=Object(s.a)(c,2),o=l[0],m=l[1],f=Object(a.useState)(),d=Object(s.a)(f,2),p=d[0],E=d[1],g=Object(a.useState)(),O=Object(s.a)(g,2),k=O[0],C=O[1],S=Object(a.useState)(),D=Object(s.a)(S,2),P=D[0],I=D[1],M=Object(a.useState)(),A=Object(s.a)(M,2),L=A[0],B=A[1],G=Object(a.useState)(!1),R=Object(s.a)(G,2),H=R[0],q=R[1],Y=Object(a.useRef)(null),_=Object(a.useRef)(null),J=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=v.a.givenProvider)||(t=window.web3&&window.web3.currentProvider),t){e.next=5;break}throw new Error("Couldn't Find an Ethereum Provider.\n\nCan't connect to databases.");case 5:return n=new v.a(t),e.next=8,n.eth.getAccounts();case 8:return a=e.sent[0],E(a),e.t0=C,e.next=13,W.a.openBox(a,n.currentProvider);case 13:e.t1=e.sent,(0,e.t0)(e.t1),e.next=20;break;case 17:e.prev=17,e.t2=e.catch(0),alert(e.t2.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){J()}),[]);var V=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=17;break}return e.next=3,k.openSpace("courier-contacts");case 3:return t=e.sent,e.next=6,t.syncDone;case 6:return B(t),e.next=9,t.private.all();case 9:return n=e.sent,I(n),a="[".concat(Object.keys(n).map((function(e){return'"'.concat(e,'"')})).join(","),"]"),r="{ profiles(ids: ".concat(a,") { name eth_address image } }"),e.next=15,W.a.profileGraphQL(r);case 15:c=e.sent.profiles,I((function(e){var t,n=Object(U.a)({},e),a=Object(y.a)(c);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.eth_address].image=r.image,n[r.eth_address].name3=r.name}}catch(l){a.e(l)}finally{a.f()}return n}));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){V()}),[k]);var Z=function(){try{var e=window.getSelection(),t=document.createRange();t.selectNodeContents(Y.current),e.removeAllRanges(),e.addRange(t),document.execCommand("copy"),e.removeAllRanges(),_.current.addMessage("Copied to Clipboard",{secondaryMessage:"URL is ready to paste\u2026",variant:"default",icon:"Assignment"})}catch(n){alert(n.message)}};return r.a.createElement(b.a,{alignItems:"center",flexDirection:"column",position:"relative"},r.a.createElement(w.a,null,"Contacts"),r.a.createElement(j.a,{onClick:function(){return q(!0)},icon:"Share",position:"absolute",top:0,right:0,mt:3,mr:3,title:"Invite Contacts"}),r.a.createElement(re.a,{isOpen:H},r.a.createElement(h.a,{p:0},r.a.createElement(j.a.Text,{icononly:!0,icon:"Close",color:"moon-gray",position:"absolute",top:0,right:0,mt:3,mr:3,onClick:function(){return q(!1)},title:"Close"}),r.a.createElement(x.b,{p:4,mb:3},r.a.createElement(w.a,null,"Invitation Link"),function(){var e="/ppl/new?alias=".concat(encodeURI(o),"&address=").concat(p),t="https://pkg.dhappy.org/#".concat(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{placeholder:"What do they call you?",value:o,onChange:function(e){return m(e.target.value)}}),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,null,"To invite contacts, send them this:"),r.a.createElement(b.a,{alignItems:"center",justifyContent:"center",flexDirection:"row"},r.a.createElement(K.HashLink,{to:e,ref:Y,style:{overflow:"hidden",textOverflow:"ellipsis"}},t),r.a.createElement(j.a,{onClick:Z,title:"Copy to Clipboard",mx:2,size:"small"},r.a.createElement(Q.a,{name:"Assignment"})))))}()),r.a.createElement(b.a,{px:4,py:3,borderTop:1,borderColor:"#E8E8E8",justifyContent:"flex-end"},r.a.createElement(j.a,{onClick:function(){n(),q(!1)}},"Done")))),P?0===Object.keys(P).length?r.a.createElement(w.a,null,"No Contacts"):r.a.createElement(N.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Avatar"),r.a.createElement("th",null,"Names"),r.a.createElement("th",null,"3Box Name"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,Object.entries(P).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return r.a.createElement("tr",{key:n},r.a.createElement("td",null,a.image&&r.a.createElement("img",{className:"avatar",src:"//ipfs.io/ipfs/".concat(a.image)})),r.a.createElement("td",{title:"Public Key: ".concat(a.key)},Object(z.c)(a.names)),r.a.createElement("td",null,r.a.createElement("a",{href:"//3box.io/".concat(n),target:"_blank",title:"3Box Profile"},a.name3)),r.a.createElement("td",null,r.a.createElement(K.HashLink,{to:"/contacts/".concat(n,"/edit")},r.a.createElement(j.a,{icon:"Edit",mx:1},"Edit")),r.a.createElement(j.a,{variant:"danger",icon:"Delete",mx:1,onClick:function(){window.confirm("Really Delete: ".concat(Object(z.c)(a.names),"?"))&&(L.private.remove(n),I((function(e){var t=Object(U.a)({},e);return delete t[n],t})))}},"Delete")))})))):r.a.createElement(h.a,null,r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(ae.a,null,"Loading Contacts"),r.a.createElement(T.a,{size:"large",mt:3}))),r.a.createElement(ce.a.Provider,{ref:_}))},oe=function(){var e=new URLSearchParams(Object(f.l)().search),t=Object(a.useState)([e.get("alias")]),n=Object(s.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(e.get("address")),m=Object(s.a)(o,1)[0],d=Object(a.useState)(),p=Object(s.a)(d,2),E=p[0],g=p[1],x=Object(a.useState)(),O=Object(s.a)(x,2),y=O[0],C=O[1],S=Object(a.useState)(),D=Object(s.a)(S,2),P=D[0],I=D[1],M=Object(a.useState)(r.a.createElement(T.a,{display:"inline",title:"Opening 3Box\u2026"})),A=Object(s.a)(M,2),L=A[0],B=A[1],N=Object(a.useState)("Save"),G=Object(s.a)(N,2),R=G[0],z=G[1],H=v.a.givenProvider;H||(H=window.web3&&window.web3.currentProvider);var q=new v.a(H),U=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.eth.getAccounts();case 3:return t=e.sent[0],e.next=6,W.a.openBox(t,q.currentProvider);case 6:n=e.sent,I(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]);Object(a.useEffect)((function(){U()}),[U]);var Y=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(r.a.createElement(T.a,{color:"orange",display:"inline",title:"Getting 3Box Profile\u2026"})),e.next=4,W.a.getProfile(m);case 4:return t=e.sent,n=Object.entries(t||{}).filter((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return!n.startsWith("proof_")&&"object"!==typeof a})),B(0===n.length?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("i",null,"Empty"))):r.a.createElement("ul",null,n.map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return r.a.createElement("li",{key:n},r.a.createElement("b",null,n,":")," ",JSON.stringify(a))})))),console.info(H,q.currentProvider),e.t0=console,e.next=11,W.a.openBox(m,q.currentProvider);case 11:return e.t1=e.sent.DID,e.t0.info.call(e.t0,"DID",e.t1),e.t2=g,e.next=16,W.a.openBox(m,q.currentProvider);case 16:e.t3=e.sent.DID,(0,e.t2)(e.t3),e.next=23;break;case 20:e.prev=20,e.t4=e.catch(0),alert(e.t4.message);case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),[m]);Object(a.useEffect)((function(){Y()}),[Y]);var _=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=11;break}return e.next=3,P.openSpace("courier-contacts");case 3:return t=e.sent,e.next=6,t.syncDone;case 6:return C(t),e.next=9,t.private.get(m);case 9:(n=e.sent)&&l((function(e){return Object(k.a)(new Set([].concat(Object(k.a)(e),Object(k.a)(n.names))))}));case 11:case"end":return e.stop()}}),e)}))),[P]);Object(a.useEffect)((function(){_()}),[_]);var J=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=4;break}console.error("Contact space isn't set"),e.next=20;break;case 4:return z(r.a.createElement(T.a,{color:"white"})),t={did:E,address:m,names:Object(k.a)(new Set(c.filter((function(e){return""!==e.trim()}))))},e.next=8,y.private.set(m,t);case 8:return e.next=10,y.private.set(E,t);case 10:return z(r.a.createElement(T.a,{color:"green"})),e.next=13,W.a.openBox(m,v.a.givenProvider);case 13:return e.sent,e.next=16,P.openSpace("courier-parcels");case 16:return n=e.sent,e.next=19,n.syncDone;case 19:z("Done");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(b.a,{flexDirection:"column"},r.a.createElement(h.a,null,r.a.createElement(w.a,null,"Create a New Contact"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Names:"),r.a.createElement("ul",null,c.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(F.a,{ml:2,value:e,my:2,onChange:function(e){var n=e.target.value;l((function(e){return[].concat(Object(k.a)(e.slice(0,t)),[n],Object(k.a)(e.slice(t+1)))}))}}),r.a.createElement(j.a,{title:"Delete",mx:2,variant:"danger",icon:"Delete",onClick:function(){return l((function(e){return 1===e.length?[""]:[].concat(Object(k.a)(e.slice(0,t)),Object(k.a)(e.slice(t+1)))}))}}),r.a.createElement(j.a,{title:"Add",icon:"Add",onClick:function(){return l((function(e){return[].concat(Object(k.a)(e.slice(0,t+1)),[""],Object(k.a)(e.slice(t+1)))}))}}))})))),r.a.createElement("li",null,r.a.createElement(b.a,{flexDirection:"row"},r.a.createElement("b",{style:{marginRight:"0.5em"}},"Decentralized ID:")," ",E||r.a.createElement(T.a,null))),r.a.createElement("li",null,r.a.createElement("b",null,"ETH Address:")," ",m),r.a.createElement("li",null,r.a.createElement(b.a,{flexDirection:"row"},r.a.createElement("b",null,"3Box Profile:")," ",!L&&r.a.createElement(T.a,null)),L)),r.a.createElement(b.a,{justifyContent:"flex-end"},r.a.createElement(K.HashLink,{to:"/contacts"},r.a.createElement(j.a.Outline,{mx:2},"Cancel")),r.a.createElement(j.a,{onClick:J,variant:"success  ",disabled:0===c.filter((function(e){return""!==e})).length||"Save"!==R},R),"Done"===R&&r.a.createElement(f.c,{to:"/contacts"}))))},ie=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(e.match.params.address),m=Object(s.a)(o,1)[0],d=Object(a.useState)(),p=Object(s.a)(d,2),E=p[0],g=p[1],x=Object(a.useState)(),O=Object(s.a)(x,2),y=O[0],C=O[1],S=Object(a.useState)(),D=Object(s.a)(S,2),P=D[0],I=D[1],M=Object(a.useState)(r.a.createElement(T.a,{display:"inline",title:"Opening 3Box\u2026"})),A=Object(s.a)(M,2),L=A[0],B=A[1],N=Object(a.useState)(),G=Object(s.a)(N,2),R=G[0],z=G[1],H=Object(a.useState)("Save"),q=Object(s.a)(H,2),U=q[0],Y=q[1],_=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return t=e.sent[0],e.t0=C,e.next=6,W.a.openBox(t,v.a.givenProvider);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){_()}),[]);var J=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(r.a.createElement(T.a,{color:"orange",display:"inline",title:"Getting 3Box Profile\u2026"})),e.next=3,W.a.getProfile(m);case 3:(t=e.sent).image&&t.image.length>0&&I(t.image[0].contentUrl["/"]),z(t&&0!==Object.keys(t).length?r.a.createElement("ul",null,Object.entries(t).filter((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return!n.startsWith("proof_")&&"object"!==typeof a})).map((function(e){var t,n=Object(s.a)(e,2),a=n[0],c=n[1];return r.a.createElement("li",{key:a},r.a.createElement("b",null,a,":")," ",/^https?:\/\//.test(t=c)?r.a.createElement("a",{href:t},t):t)}))):r.a.createElement("i",null,"Empty"));case 6:case"end":return e.stop()}}),e)}))),[]);Object(a.useEffect)((function(){J()}),[J]);var Q=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=11;break}return e.next=3,y.openSpace("courier-contacts");case 3:return t=e.sent,e.next=6,t.syncDone;case 6:return g(t),e.next=9,t.private.get(m);case 9:(n=e.sent)?l((function(e){return Object(k.a)(new Set([].concat(Object(k.a)(e||[]),Object(k.a)(n.names))))})):alert("Contact ".concat(m," Not Found"));case 11:case"end":return e.stop()}}),e)}))),[y]);Object(a.useEffect)((function(){Q()}),[Q]);var V=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(r.a.createElement(T.a,{color:"white"})),e.next=3,E.private.set(m,{address:m,names:Object(k.a)(new Set(c.filter((function(e){return""!==e.trim()}))))});case 3:Y("Done");case 4:case"end":return e.stop()}}),e)}))),[E]);return r.a.createElement(h.a,{width:"50%",margin:"auto"},r.a.createElement(b.a,{flexDirection:"row",alignItems:"center"},P&&r.a.createElement("img",{className:"avatar",src:"//ipfs.io/ipfs/".concat(P)}),r.a.createElement(w.a,{ml:15},"Edit a Contact")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(b.a,{flexDirection:"row"},r.a.createElement("b",null,"Names:"),!c&&r.a.createElement(T.a,{title:"Loading from 3Box\u2026",mx:2})),c&&r.a.createElement("ul",null,c.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(F.a,{ml:2,value:e,my:2,onChange:function(e){var n=e.target.value;l((function(e){return[].concat(Object(k.a)(e.slice(0,t)),[n],Object(k.a)(e.slice(t+1)))}))}}),r.a.createElement(j.a,{title:"Delete",mx:2,variant:"danger",icon:"Delete",onClick:function(){return l((function(e){return 1===e.length?[""]:[].concat(Object(k.a)(e.slice(0,t)),Object(k.a)(e.slice(t+1)))}))}}),r.a.createElement(j.a,{title:"Add",icon:"Add",onClick:function(){return l((function(e){return[].concat(Object(k.a)(e.slice(0,t+1)),[""],Object(k.a)(e.slice(t+1)))}))}}))})))),r.a.createElement("li",null,r.a.createElement("b",null,"ETH Address:")," ",m),r.a.createElement("li",null,r.a.createElement(b.a,{flexDirection:"row"},r.a.createElement("b",null,"3Box Profile:")," ",!R&&L),R)),r.a.createElement(b.a,{justifyContent:"flex-end"},r.a.createElement(K.HashLink,{to:"/contacts"},r.a.createElement(j.a.Outline,{mx:2},"Cancel")),r.a.createElement(j.a,{onClick:V,variant:"success  ",disabled:0===(c||[]).filter((function(e){return""!==e})).length||"Save"!==U},U),"Done"===U&&r.a.createElement(f.c,{to:"/contacts"})))},ue=n(99),se=n(948),me=n(2356),fe=n(142),de=n(949),pe=n.n(de),he=n(950),be=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,l,o,u,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http://localhost:5001/api/v0",n=Object(he.create)({url:"http://localhost:5001/api/v0"}),a=[],r=!0,c=!1,e.prev=5,o=Object(se.a)(n.ls(t));case 7:return e.next=9,o.next();case 9:return u=e.sent,r=u.done,e.next=13,u.value;case 13:if(s=e.sent,r){e.next=20;break}m=s,a.push(m);case 17:r=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),c=!0,l=e.t0;case 26:if(e.prev=26,e.prev=27,r||null==o.return){e.next=31;break}return e.next=31,o.return();case 31:if(e.prev=31,!c){e.next=34;break}throw l;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.abrupt("return",a);case 37:case"end":return e.stop()}}),e,null,[[5,22,26,36],[27,,31,35]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(a.useState)({width:8.5,height:11}),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)({width:2.625,height:2}),o=Object(s.a)(l,2),m=o[0],f=o[1],d=Object(a.useState)({width:1/8,height:0}),p=Object(s.a)(d,2),E=p[0],g=p[1],v=Object(a.useState)({width:7/32,height:15/32}),x=Object(s.a)(v,2),w=x[0],O=x[1],y=Object(a.useState)([]),C=Object(s.a)(y,2),S=C[0],D=C[1],P=Object(a.useState)([]),I=Object(s.a)(P,2),M=I[0],A=I[1],T={'Avery 6793 (15\xd7(2"\xd72\u215d"))':{page:{width:8.5,height:11},label:{width:2.625,height:2},outerGutter:{width:7/32,height:15/32},innerGutter:{width:1/8,height:0}},'Avery 6874 (6\xd7(3"\xd73\xbe"))':{page:{width:8.5,height:11},label:{width:3.75,height:3},outerGutter:{width:3/8,height:5/8},innerGutter:{width:1/4,height:3/8}}},L={page:c,label:f,innerGutter:g,outerGutter:O};Object(a.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=A,e.next=3,be("QmT8fxdiii2hagjjTNf5xRwneW5KNopCNQaegLwuyVYZgu");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var B=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){var t,a,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.round((n.height-2*w.height+E.height)/(m.height+E.height)),a=Math.round((n.width-2*w.width+E.width)/(m.width+E.width)),r=Object(k.a)(new Array(Math.round(t*a))).map(G),e.next=5,Promise.all(r.map((function(e){return new Promise((function(t,n){pe.a.toString("https://pkg.dhappy.org/#/cel/".concat(e),{margin:0,errorCorrectionLevel:"low"},(function(e,n){if(e)throw e;t(n)}))}))})));case 5:c=e.sent,l=r.map((function(e,t){return{guid:e,qr:c[t]}})),D(Object(z.b)(l,a));case 8:case"end":return e.stop()}}),e)}))),[n,m,w,E]);Object(a.useEffect)((function(){B()}),[B]);var N=function(e,t){return function(n){var a=n.target.value;L[e]?L[e]((function(e){return Object(U.a)(Object(U.a)({},e),{},Object(ue.a)({},t,a))})):console.error("No Setter For: ".concat(e))}},G=function(){var e=new Array;Object(me.a)({},e);return fe.encode(e)},F=function(e,t,n){var a=96*(w.width+n*(m.width+E.width)),c=96*(w.height+t*(m.height+E.height)),l=96*(w.height+m.height/2),o=.8*Math.min(m.width,m.height)*96;return r.a.createElement("g",{key:e.guid,transform:"translate(".concat(a,", ").concat(c,") rotate(-90) translate(").concat(-l,", 0)")},function(){if(M.length>0){var e=M[Math.floor(M.length*Math.random())];return r.a.createElement("image",{xlinkHref:"http://localhost:8888/ipfs/".concat(e.path),x:"4%",y:"-1.25%",height:"6rem"})}}(),r.a.createElement("image",{width:o,height:o,x:.22*o/2,y:96*m.width-o-.05*o,xlinkHref:"data:image/svg+xml;utf8,".concat(encodeURIComponent(e.qr))}))};return r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(j.a,{onClick:function(){return be("QmT8fxdiii2hagjjTNf5xRwneW5KNopCNQaegLwuyVYZgu")}}," List Images"),r.a.createElement(j.a,{onClick:function(){return console.log("HI")}}," SAYHI!!"),r.a.createElement(h.a,{className:"config"},r.a.createElement(b.a,{flexDirection:"column"},r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("label",null,"Page Size:"),r.a.createElement("input",{type:"number",value:n.width,onChange:N("page","width")}),r.a.createElement("span",null,"\xd7"),r.a.createElement("input",{value:n.height,onChange:N("page","height")})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Label:"),r.a.createElement("input",{value:m.width,onChange:N("label","width")}),r.a.createElement("span",null,"\xd7"),r.a.createElement("input",{value:m.height,onChange:N("label","height")})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Outer Gutters:"),r.a.createElement("input",{value:w.width,onChange:N("outerGutter","width")}),r.a.createElement("span",null,"\xd7"),r.a.createElement("input",{value:w.height,onChange:N("outerGutter","height")})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Inner Gutters:"),r.a.createElement("input",{value:E.width,onChange:N("innerGutter","width")}),r.a.createElement("span",null,"\xd7"),r.a.createElement("input",{value:E.height,onChange:N("innerGutter","height")}))),r.a.createElement(J.a,{label:"Presets:"},r.a.createElement("select",{onChange:function(e){for(var t=T[e.target.value],n=0,a=Object.keys(L);n<a.length;n++){var r=a[n];L[r](t[r])}}},Object.keys(T).map((function(e,t){return r.a.createElement("option",{key:t},e)})))))),r.a.createElement(b.a,null,r.a.createElement("svg",{viewBox:[0,0,96*n.width,96*n.height].join(" "),width:"".concat(n.width,"in"),height:"".concat(n.height,"in"),transform:"translate(0, ".concat(96*w.height,")")},S.map((function(e,t){return e.map((function(e,n){return F(e,t,n)}))})))))};var ge=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],l=new v.a(v.a.givenProvider),o=Object(a.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=c,e.next=4,l.eth.net.getId();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error("App#setNet",e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[l.eth.net]);Object(a.useEffect)((function(){o()}),[o]);var d=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent);return r.a.createElement(m.HashRouter,null,r.a.createElement(p.a,{currentNetwork:n,requiredNetwork:4},{notWeb3CapableBrowserMessage:r.a.createElement(h.a,{maxWidth:"25em",mx:"auto",marginTop:"1.5em"},r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(E.a,{as:"a",href:"//metamask.app.link/dapp/pkg.dhappy.org",mx:"auto"},d?"Launch in MetaMask":"Get Metamask"))),noNetworkAvailableMessage:r.a.createElement(h.a,{maxWidth:"25em",mx:"auto",marginTop:"1.5em"},r.a.createElement(b.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(E.a,{as:"a",href:"//metamask.io/download.html",mx:"auto"},d?"Launch in MetaMask":"Get Metamask")))}),r.a.createElement(f.g,null,r.a.createElement(f.d,{path:"/",exact:!0,component:O}),r.a.createElement(f.d,{path:"/overview",component:ne}),r.a.createElement(f.d,{path:"/ppl/:address/edit",component:ie}),r.a.createElement(f.d,{path:"/ppl/new",component:oe}),r.a.createElement(f.d,{path:"/ppl",component:le}),r.a.createElement(f.d,{path:"/jobs/public",component:q}),r.a.createElement(f.d,{path:"/jobs/private",component:_}),r.a.createElement(f.d,{path:"/cel/:guid",component:$}),r.a.createElement(f.d,{path:"/parcels",component:Z}),r.a.createElement(f.d,{path:"/contracts/new",component:ee.a}),r.a.createElement(f.d,{path:"/contracts/:id/join",component:te}),r.a.createElement(f.d,{path:"/contracts",component:X}),r.a.createElement(f.d,{path:"/labels",component:Ee})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},387:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(943),l=n.n(c);n(419);t.a=function(e){return r.a.createElement(l.a,{delay:200,onError:function(e){alert(e.message)},onScan:e.onScan,style:{width:"50vw",maxHeight:"50vh"}})}},419:function(e,t,n){},424:function(e,t){},945:function(e,t,n){"use strict";(function(e){var a=n(84),r=n(99),c=n(946),l=n(107),o=n(43),i=n(3),u=n.n(i),s=n(28),m=n(26),f=n(0),d=n.n(f),p=n(2357),h=n(2358),b=n(2351),E=n(2359),g=n(2352),v=n(2353),x=n(2354),j=n(111),w=n(145),O=n(188),k=n(174),y=n(67),C=n(219),S=n(953),D=n(954),P=n(2355),I=n(186),M=n(552),A=n(101),T=n(952),L=n(947),B=n(65),N=n.n(B),G=n(51),F=n.n(G),R=n(2356),W=n(142),z=(n(513),n(102)),H=n(387);t.a=function(t){var n=Object(f.useState)(),i=Object(m.a)(n,2),B=i[0],G=i[1],q=Object(f.useState)({lat:53,lng:12}),U=Object(m.a)(q,2),Y=U[0],_=U[1],J=Object(f.useState)(Y),Q=Object(m.a)(J,2),V=Q[0],Z=Q[1],K=Object(f.useState)(200),$=Object(m.a)(K,2),X=$[0],ee=$[1],te=Object(f.useState)(),ne=Object(m.a)(te,2),ae=ne[0],re=ne[1],ce=Object(f.useState)(0),le=Object(m.a)(ce,2),oe=le[0],ie=le[1],ue=Object(f.useState)(),se=Object(m.a)(ue,2),me=se[0],fe=se[1],de=Object(f.useState)(0),pe=Object(m.a)(de,2),he=pe[0],be=pe[1],Ee=Object(f.useState)(),ge=Object(m.a)(Ee,2),ve=ge[0],xe=ge[1],je=Object(f.useState)([]),we=Object(m.a)(je,2),Oe=we[0],ke=we[1],ye=Object(f.useState)(!1),Ce=Object(m.a)(ye,2),Se=Ce[0],De=Ce[1],Pe=(new F.a(F.a.givenProvider),[]);Object(R.a)({},Pe);var Ie=W.encode(Pe),Me=Object(f.useState)(Object(z.b)(Ie,6).join("\u2013")),Ae=Object(m.a)(Me,2),Te=Ae[0],Le=Ae[1];Object(f.useEffect)((function(){L.a.register(T.a)}),[]);var Be=Object(f.useCallback)(Object(s.a)(u.a.mark((function e(){var t,n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=F.a.givenProvider)||(t=window.web3&&window.web3.currentProvider),t){e.next=4;break}throw new Error("Couldn't Find an Ethereum Provider.\n\nCan't connect to databases.");case 4:return n=new F.a(t),e.next=7,n.eth.getAccounts();case 7:return a=e.sent[0],e.next=10,N.a.openBox(a,F.a.givenProvider);case 10:return r=e.sent,e.t0=xe,e.next=14,r.openSpace("courier");case 14:return e.next=16,e.sent.DID;case 16:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=20,r.openSpace("courier-contacts");case 20:return c=e.sent,e.next=23,c.syncDone;case 23:return e.t2=fe,e.next=26,c.private.all();case 26:e.t3=e.sent,(0,e.t2)(e.t3);case 28:case"end":return e.stop()}}),e)}))),[]);Object(f.useEffect)((function(){Be()}),[Be]),Object(f.useEffect)((function(){navigator.permissions.query({name:"geolocation"}).then((function(e){if("granted"===e.state||"prompt"===e.state){navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};_(t),Z(t)}),(function(e){return alert("Error Getting Current Position: '".concat(e.message,"'"))}))}else"denied"===e.state?alert("Couldn't Access GPS"):alert("Unknown GPS Code: ".concat(e.state))}))}),[]),Object(f.useEffect)((function(){var e=function(){};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]);var Ne=function(e){G(e)},Ge={lat:V.lat-Y.lat,lng:V.lng-Y.lng},Fe=Math.sqrt(Math.pow(Ge.lat,2)+Math.pow(Ge.lng,2)),Re=[{lat:Y.lat+Ge.lat/2-2*Fe,lng:Y.lng+Ge.lng/2-5*Fe},{lat:Y.lat+Ge.lat/2+2*Fe,lng:Y.lng+Ge.lng/2+5*Fe}],We=function(e){Z(e.latlng),ee(Object(z.d)(Y,e.latlng)),ie(X/750)},ze=["Mail","Map","Info","MarkunreadMailbox","Dai","LocalTaxi","Save"],He=["Configure whether sending or receiving.","Choose a waypoint and travel time for meeting the courier.","Set the package id.","Choose the party for the other end of your transaction.","Specify the bond you would like on the delivery.","Choose couriers to request bids from.","Review the contract and send it for completion."],qe=function(e){var t=e.idx,n=e.onBack,a=e.onNext,r=e.nextAvail,c=void 0===r||r;return d.a.createElement(j.a,{mt:25,mb:10,justifyContent:"flex-end",alignItems:"center",flexDirection:"row"},Object(o.a)(new Array(ze.length)).map((function(e,n){return d.a.createElement(A.HashLink,{key:n,to:"#".concat(n+1)},n+1!==t?d.a.createElement(w.a.Outline,{size:"small",icon:ze[n%ze.length],title:He[n%He.length],px:0,mx:0,mt:0}):d.a.createElement(w.a,{size:"small",icon:ze[n%ze.length],title:He[n%He.length],px:0,mx:1,mt:0}))})),d.a.createElement(A.HashLink,{to:"#".concat(t-1)},d.a.createElement(w.a.Outline,{onClick:n,icon:"ArrowBack",mt:3,mx:1},"Back")),d.a.createElement(A.HashLink,{to:"#".concat(t+1),disabled:!c},d.a.createElement(w.a,{onClick:a,icon:"ArrowForward",mt:3,mx:1,disabled:!c},"Next")))},Ue=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.openBox(t,F.a.givenProvider);case 2:return a=e.sent,e.next=5,a.openSpace("courier");case 5:return r=e.sent,e.next=8,r.joinThread("inbox");case 8:return c=e.sent,e.next=11,c.post(n);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return d.a.createElement(j.a,{className:"cards",flexDirection:"column"},d.a.createElement(O.a,{id:"1",className:"card"},d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"Which are you?"),d.a.createElement(j.a,{flexDirection:"row"},d.a.createElement(A.HashLink,{to:"#2",onClick:function(){return Ne("pick-up")}},d.a.createElement(w.a,{variant:"pick-up"===B&&"success",mx:"0.5em"},"Sender")),d.a.createElement(A.HashLink,{to:"#2",onClick:function(){return Ne("dropoff")}},d.a.createElement(w.a,{variant:"dropoff"===B&&"success",mx:"0.5em"},"Recipient"))))),d.a.createElement(O.a,{id:"2",className:"card map"},qe({idx:2}),d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"Where are you?"),d.a.createElement(y.a,{indent:"1.5em",fontSize:22},"Your location is anonymized by specifying your distance from a waypoint in terms of travel time."),d.a.createElement(y.a,{indent:"1.5em",fontSize:22},"Please place your waypoint within \xbc mile of a public road. Once your courier is arranged you will get a chat to orchestrate your parcel pickup. If, for whatever reason, you are unresponsive, the courier will go to the waypoint."),d.a.createElement(y.a,{indent:"1.5em",fontSize:22},"If they still can't reach you they can register a wait complaint, but they have to be within \xbc mile of the waypoint."),d.a.createElement(p.a,{center:Y,zoom:11,width:.8,style:{margin:"1em auto"}},d.a.createElement(h.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="//osm.org/copyright">OpenStreetMap</a> contributors'}),d.a.createElement(b.a,{position:V,draggable:!0,onDrag:We},d.a.createElement(E.a,null,"".concat(Object(z.a)(B)," Waypoint"))),d.a.createElement(g.a,{center:Y,radius:X}),d.a.createElement(v.a,{positions:[Y,V]}),d.a.createElement(x.a,{bounds:Re},d.a.createElement("text",{x:"50%",y:"50%",fill:"black",fontSize:25,stroke:"black",textAnchor:"middle"},oe&&"".concat(oe.toFixed(1),"min")))),d.a.createElement(j.a,{alignItems:"center",flexDirection:"row"},d.a.createElement(y.a,{mx:"0.5em"},"".concat(Object(z.a)(B)," Waypoint:")),d.a.createElement(C.a,{type:"number",value:V.lat,onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):Y.lat;We({latlng:Object(l.a)(Object(l.a)({},V),{},{lat:t})})}}),d.a.createElement(y.a,{fontSize:"200%"},"\xd7"),d.a.createElement(C.a,{type:"number",value:V.lng,onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):Y.lng;We({latlng:Object(l.a)(Object(l.a)({},V),{},{lng:t})})}})),d.a.createElement(j.a,{alignItems:"center",flexDirection:"row",mt:3},d.a.createElement(y.a,{mx:"0.5em"},"Time to ".concat("pick-up"===B?"Sender":"Recipient",":")),d.a.createElement(C.a,{width:"4em",type:"number",value:Math.ceil(oe||0),onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):oe;ie(t)}}),d.a.createElement(y.a,null,"minute",1===oe?"":"s")))),d.a.createElement(O.a,{id:"3",className:"card"},qe({idx:3}),d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"What is the package id?"),d.a.createElement(y.a,{fontSize:22},"Every parcel in the network has a unique identifier that should be ",d.a.createElement(A.HashLink,{to:"/labels"},"scannable as a QR code")," or NFC tag. Barring that, the id should be written on the package."),d.a.createElement(j.a,{alignItems:"center",flexDirection:"row"},d.a.createElement(C.a,{width:"35ch",value:Te,textAlign:"center",onChange:function(e){return Le(e.target.value)}}),d.a.createElement(w.a,{icon:"Pages",title:"Scan QR Code",onClick:function(){return De(!0)}})),Se&&d.a.createElement(O.a,null,d.a.createElement(H.a,{onScan:function(e){if(e){var t=e.match(/^(https?:)?\/\/pkg.dhappy.org\/(#\/)?cel\/([^/]+)/i);t&&(Le(t[3]),De(!1))}}})))),d.a.createElement(O.a,{id:"4",className:"card"},qe({idx:4}),d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"Who are you ","pick-up"===B?"sending it to":"getting it from","?"),me?d.a.createElement(D.a,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Select"),d.a.createElement("th",null,"Names"))),d.a.createElement("tbody",null,Object.entries(me).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return d.a.createElement("tr",{key:n,style:{cursor:"pointer"}},d.a.createElement("td",null,d.a.createElement(P.a,{checked:ae===a,onChange:function(e){re((function(e){return console.info(e,a,e===a),e!==a?a:null}))}})),d.a.createElement("td",{onClick:function(){return re(a)}},Object(z.c)(a.names)))})))):d.a.createElement(d.a.Fragment,null,d.a.createElement(k.a,null,"Loading Contacts"),d.a.createElement(S.a,null)))),d.a.createElement(O.a,{id:"5",className:"card"},qe({idx:5}),d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"What bond do you want on the delivery?"),d.a.createElement(y.a,{indent:"1.5em",fontSize:22},"Couriers stake a bond as insurance for their good faith. If your courier fails to check in at a waypoint or receive a delivery receipt, this is the what you get to cover your loss."),d.a.createElement(j.a,{alignItems:"center",flexDirection:"row"},d.a.createElement(C.a,{my:3,type:"number",value:he,onChange:function(e){var t=""!==e.target.value?parseFloat(e.target.value):0;t<0&&(t*=(Object(c.a)("bond"),-1)),be(t)}}),d.a.createElement(y.a,{ml:2},d.a.createElement(I.a,{name:"Dai"})," DAI")))),d.a.createElement(O.a,{id:"6",className:"card"},qe({idx:6}),d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"Choose Couriers"),d.a.createElement(y.a,{indent:"1.5em",fontSize:"15pt"},"These couriers will be notified of your contract and given an opportunity to bid."),me?d.a.createElement(D.a,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Select"),d.a.createElement("th",null,"Names"))),d.a.createElement("tbody",null,Object.entries(me).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return d.a.createElement("tr",{key:n},d.a.createElement("td",null,d.a.createElement(M.a,{checked:Oe.includes(a),onChange:function(e){e.target.checked?ke((function(e){return Object(o.a)(new Set([].concat(Object(o.a)(e),[a])))})):ke((function(e){return e.filter((function(e){return e!==a}))}))}})),d.a.createElement("td",{onClick:function(e){ke((function(e){return e.includes(a)?e.filter((function(e){return e!==a})):Object(o.a)(new Set([].concat(Object(o.a)(e),[a])))}))}},Object(z.c)(a.names)))})))):d.a.createElement(d.a.Fragment,null,d.a.createElement(k.a,null,"Loading Contacts"),d.a.createElement(S.a,null)))),d.a.createElement(O.a,{id:"7",className:"card"},qe({idx:7,nextAvail:void 0!==B,onNext:function(){var t=Object(s.a)(u.a.mark((function t(n){var c,l,o,i,s,m,f,d,p,h,b,E,g,v,x,j;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((c=F.a.givenProvider)||(c=window.web3&&window.web3.currentProvider),c){t.next=4;break}throw new Error("Couldn't Find an Ethereum Provider.\n\nCan't connect to databases.");case 4:return l=new F.a(c),t.next=7,l.eth.getAccounts();case 7:return o=t.sent[0],t.next=10,N.a.openBox(o,F.a.givenProvider);case 10:return i=t.sent,t.next=13,i.openSpace("courier");case 13:return s=t.sent,t.next=16,s.waitSync;case 16:return m=W.decode(Te.replace(/-/g,"")),t.next=19,crypto.subtle.digest("SHA-256",m);case 19:return f=t.sent,d=W.encode(e.from(f)),p="bids-".concat(d),t.next=24,s.createConfidentialThread(p);case 24:return h=t.sent,b=Object(r.a)({bond:(he||0)*Math.pow(10,18)},B,{contact:ve,lat:Math.round(V.lat*Math.pow(10,6)),lng:Math.round(V.lng*Math.pow(10,6)),travelTime:Math.round(60*oe)}),console.info("TCT",b),t.next=29,h.post({contract:b});case 29:return t.next=31,h.addMember(ae.address);case 31:return E=o,t.next=34,Ue(ae.address,{awaiting:h.address,creator:E});case 34:g=Object(a.a)(Oe),t.prev=35,g.s();case 37:if((v=g.n()).done){t.next=46;break}return x=v.value,t.next=41,h.addMember(x.address);case 41:return t.next=43,Ue(x.address,{contract:h.address,creator:E});case 43:console.info(x);case 44:t.next=37;break;case 46:t.next=51;break;case 48:t.prev=48,t.t0=t.catch(35),g.e(t.t0);case 51:return t.prev=51,g.f(),t.finish(51);case 54:return t.next=56,h.getPosts();case 56:j=t.sent,console.info(j);case 58:case"end":return t.stop()}}),t,null,[[35,48,51,54]])})));return function(e){return t.apply(this,arguments)}}()}),d.a.createElement(j.a,{alignItems:"center",flexDirection:"column"},d.a.createElement(k.a,null,"Get ","pick-up"===B?"Recipient":"Sender"," Information"),B?ae?d.a.createElement(y.a,{fontSize:22},"The contract will now be sent to ",ae.names[0]," for their location information. ",Oe.length>0&&"Links to the bidding database will be sent to the following couriers for bids:"):d.a.createElement(y.a,{fontSize:22},"You have not ",d.a.createElement(A.HashLink,{to:"#4"},"selected the other party"),"."):d.a.createElement(y.a,{fontSize:22},"You need to specify ",d.a.createElement(A.HashLink,{to:"#1"},"whether you are sending or receiving"),".")),B&&ae&&d.a.createElement(j.a,{alignItems:"start",flexDirection:"column"},d.a.createElement("ul",null,Oe.map((function(e,t){return d.a.createElement("li",{key:t},Object(z.c)(e.names))}))))))}}).call(this,n(5).Buffer)},956:function(e,t,n){e.exports=n(2347)},961:function(e,t,n){},978:function(e,t){},999:function(e,t){}},[[956,1,2]]]);
//# sourceMappingURL=main.e8c0ce30.chunk.js.map